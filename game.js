//PART 1 (DAY1)


const inputArray= [137503,60363,103031,141000,101650,76081,139069,63717,135021,66034,53912,83417,125978,73206,77497,108822,133339,113618,91973,88741,109942,96523,95973,56595,118638,63936,101635,149154,85522,140962,108196,105804,148464,68429,146808,82541,85581,117253,117900,83457,103354,123875,88412,108573,140651,103774,95291,91290,98690,87761,122907,91499,141746,127300,114866,75472,65369,50978,119756,144115,92483,146317,100770,124156,109933,138037,101126,58517,83653,135656,111483,82784,107459,106641,138030,53599,123886,74425,96919,65410,63823,148278,133753,106661,51147,120571,77900,131827,107882,149359,127565,67109,131547,114874,130493,94905,138654,58504,79591,133856];
const testArray = [12,14,1969,100756];
const getSum = (a,x) => {return a + x;};

const machine = (array, index=0) => {
    let newValue;

    while(index<array.length){
        newValue = Math.floor(array[index]/3)-2;
        array[index]=newValue;
        index++;
    }

    return array.reduce(getSum);
}

console.log(machine(inputArray));


//PART 2 (DAY1)

const inputArray= [137503,60363,103031,141000,101650,76081,139069,63717,135021,66034,53912,83417,125978,73206,77497,108822,133339,113618,91973,88741,109942,96523,95973,56595,118638,63936,101635,149154,85522,140962,108196,105804,148464,68429,146808,82541,85581,117253,117900,83457,103354,123875,88412,108573,140651,103774,95291,91290,98690,87761,122907,91499,141746,127300,114866,75472,65369,50978,119756,144115,92483,146317,100770,124156,109933,138037,101126,58517,83653,135656,111483,82784,107459,106641,138030,53599,123886,74425,96919,65410,63823,148278,133753,106661,51147,120571,77900,131827,107882,149359,127565,67109,131547,114874,130493,94905,138654,58504,79591,133856];
const testArray = [14,1969,100756];
let dummArray=[];
const getSum = (a,x) => {return a + x;};


const machine = (array, index=0) => {


        while(index<array.length){
            let newValue=array[index];
            while(Math.floor(newValue/3)-2 > 0){
                newValue= Math.floor(newValue/3)-2;
                dummArray.push(newValue);
            }

            array[index]=newValue;
            index++;

        }

    return dummArray.reduce(getSum);
    //return array.reduce(getSum);
}

console.log(machine(inputArray));

//PART 1 (DAY 2)

const inputArray= [1,12,2,3,1,1,2,3,1,3,4,3,1,5,0,3,2,10,1,19,2,19,6,23,2,13,23,27,1,9,27,31,2,31,9,35,1,6,35,39,2,10,39,43,1,5,43,47,1,5,47,51,2,51,6,55,2,10,55,59,1,59,9,63,2,13,63,67,1,10,67,71,1,71,5,75,1,75,6,79,1,10,79,83,1,5,83,87,1,5,87,91,2,91,6,95,2,6,95,99,2,10,99,103,1,103,5,107,1,2,107,111,1,6,111,0,99,2,14,0,0];
const testArray= [1,1,1,4,99,5,6,0,99];
let i = 0;

while(i<inputArray.length){
    if(inputArray[i]!==99) {
        let fc =inputArray[i+1];
        let sc =inputArray[i+2];
        let pc =inputArray[i+3];

        let fv = inputArray[fc];
        let sv = inputArray[sc];

        let realValue= inputArray[i] === 1 ? fv + sv
                : inputArray[i] === 2 ? fv * sv
                : 'x';

        inputArray[pc] = realValue!=='x' ? realValue : inputArray[pc];
        i+=4;
    } else {
       break;
    }
}

console.log(inputArray[0]);

//PART 2 (DAY 2)

let inputArray = [1,0,0,3,1,1,2,3,1,3,4,3,1,5,0,3,2,10,1,19,2,19,6,23,2,13,23,27,1,9,27,31,2,31,9,35,1,6,35,39,2,10,39,43,1,5,43,47,1,5,47,51,2,51,6,55,2,10,55,59,1,59,9,63,2,13,63,67,1,10,67,71,1,71,5,75,1,75,6,79,1,10,79,83,1,5,83,87,1,5,87,91,2,91,6,95,2,6,95,99,2,10,99,103,1,103,5,107,1,2,107,111,1,6,111,0,99,2,14,0,0];
const wantedResult = 19690720;

const machine = (array) => {
    let i=0;
    while(i<array.length){
        if(array[i]!==99) {
            let fc =array[i+1];
            let sc =array[i+2];
            let pc =array[i+3];

            let fv = array[fc];
            let sv = array[sc];

            let realValue= array[i] === 1 ? fv + sv
                : array[i] === 2 ? fv * sv
                    : 'x';

            array[pc] = realValue!=='x' ? realValue : null;
            i+=4;
        } else {
            break;
        }
    }
    return array[0];
}

let noun =0;
let verb =0;


while(machine(inputArray)!==wantedResult){
    inputArray= [1,noun,verb,3,1,1,2,3,1,3,4,3,1,5,0,3,2,10,1,19,2,19,6,23,2,13,23,27,1,9,27,31,2,31,9,35,1,6,35,39,2,10,39,43,1,5,43,47,1,5,47,51,2,51,6,55,2,10,55,59,1,59,9,63,2,13,63,67,1,10,67,71,1,71,5,75,1,75,6,79,1,10,79,83,1,5,83,87,1,5,87,91,2,91,6,95,2,6,95,99,2,10,99,103,1,103,5,107,1,2,107,111,1,6,111,0,99,2,14,0,0];
   if(noun<100){
       if(verb<100){
           verb++;
       } else {
           verb=0;
           noun++;
       }
   }
}

console.log(100*inputArray[1]+inputArray[2]);